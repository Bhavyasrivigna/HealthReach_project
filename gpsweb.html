<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ambulance Dashboard</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<style>
    body {
        margin: 0;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: #f0f2f5;
    }
    header {
        background: #1e2a38;
        color: white;
        padding: 15px;
        text-align: center;
        font-size: 1.8em;
        font-weight: bold;
    }
    #map {
        width: 100%;
        height: 400px;
    }

    .dashboard {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-around;
        margin: 20px;
    }

    .card {
        flex: 1 1 220px;
        margin: 10px;
        padding: 20px;
        border-radius: 15px;
        color: white;
        min-width: 250px;
        transition: transform 0.3s, box-shadow 0.3s;
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }

    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0,0,0,0.3);
    }

    .card h3 {
        margin-top: 0;
        font-size: 1.2em;
        border-bottom: 2px solid rgba(255,255,255,0.5);
        padding-bottom: 5px;
    }

    .status-box {
        padding: 10px;
        border-radius: 12px;
        font-weight: bold;
        text-align: center;
        margin-top: 10px;
        color: white;
        transition: background 0.5s;
    }

    /* Progress bar */
    .progress-container {
        background: rgba(255,255,255,0.3);
        border-radius: 12px;
        overflow: hidden;
        height: 15px;
        margin-top: 10px;
    }

    .progress-bar {
        height: 15px;
        width: 0%;
        background: white;
        border-radius: 12px;
        transition: width 1s ease-in-out;
    }

    /* Timeline */
    .timeline {
        list-style: none;
        padding-left: 0;
        margin-top: 10px;
    }

    .timeline li {
        padding: 8px 0;
        border-left: 4px solid rgba(255,255,255,0.5);
        margin-left: 10px;
        position: relative;
        transition: color 0.3s;
    }

    .timeline li::before {
        content: '';
        position: absolute;
        left: -8px;
        top: 0;
        width: 12px;
        height: 12px;
        background: rgba(255,255,255,0.5);
        border-radius: 50%;
        transition: background 0.3s;
    }

    .timeline li.active {
        color: #fff;
        font-weight: bold;
    }

    .timeline li.active::before {
        background: #fff;
    }

    /* Colorful card backgrounds */
    .status-card { background: linear-gradient(135deg, #f39c12, #f1c40f); }
    .ambulance-card { background: linear-gradient(135deg, #3498db, #2980b9); }
    .emergency-card { background: linear-gradient(135deg, #e74c3c, #c0392b); }
    .timeline-card { background: linear-gradient(135deg, #2ecc71, #27ae60); }

    /* Responsive */
    @media (max-width: 768px) {
        #map { height: 300px; }
        .dashboard { flex-direction: column; align-items: center; }
        .card { width: 90%; }
    }

</style>
</head>
<body>

<header>Ambulance Dashboard</header>

<div id="map"></div>

<div class="dashboard">
    <!-- Current Status Card -->
    <div class="card status-card">
        <h3>Current Status</h3>
        <div id="statusBox" class="status-box">Loading...</div>
        <div class="progress-container">
            <div id="progressBar" class="progress-bar"></div>
        </div>
    </div>

    <!-- Ambulance Details Card -->
    <div class="card ambulance-card">
        <h3>Ambulance Details</h3>
        <p><strong>Vehicle No:</strong> <span id="vehicle">AMB-1234</span></p>
        <p><strong>Driver:</strong> <span id="driver">John Doe</span></p>
        <p><strong>Contact:</strong> <span id="driverContact">+91 9876543210</span></p>
    </div>

   <!-- Emergency Contact Card -->
<div class="card emergency-card">
    <h3>Emergency Contact</h3>
    <p><strong>Name:</strong> <span id="patientName">Jane Smith</span></p>
    <p><strong>Contact:</strong> <span id="patientContact">+91 9123456780</span></p>
    <button id="callCrewBtn" style="
        margin-top: 10px;
        padding: 10px 20px;
        border: none;
        border-radius: 8px;
        background: #fff;
        color: #c0392b;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.3s, color 0.3s;
    ">Call the Crew</button>
</div>


    <!-- Response Timeline Card -->
    <div class="card timeline-card">
        <h3>Response Timeline</h3>
        <ul class="timeline" id="timeline">
            <li id="callReceived">Emergency Call Received <span id="time0"></span></li>
            <li id="dispatched">Ambulance Dispatched <span id="time1"></span></li>
            <li id="enroute">Enroute to Location <span id="time2"></span></li>
            <li id="arrival">Arrival at Scene <span id="time3"></span></li>
        </ul>
    </div>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
    // Initialize map
    const map = L.map('map').setView([17.385044, 78.486671], 13);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: 'Â© OpenStreetMap'
    }).addTo(map);

    const ambulanceIcon = L.icon({
        iconUrl: 'https://cdn-icons-png.flaticon.com/512/2963/2963928.png',
        iconSize: [40, 40],
        iconAnchor: [20, 40]
    });

    const marker = L.marker([17.385044, 78.486671], {icon: ambulanceIcon}).addTo(map);

    // Simulated live location and status updates
    let lat = 17.385044;
    let lng = 78.486671;

    const statuses = [
        {text: "Emergency Call Received", class: "status-box"},
        {text: "Ambulance Dispatched", class: "status-box"},
        {text: "Enroute to Location", class: "status-box"},
        {text: "Arrival at Scene", class: "status-box"}
    ];

    let step = 0;

    function getCurrentTime() {
        const now = new Date();
        return now.getHours().toString().padStart(2,'0')+":"+now.getMinutes().toString().padStart(2,'0')+":"+now.getSeconds().toString().padStart(2,'0');
    }

    function updateDashboard() {
        // Move ambulance randomly
        lat += (Math.random() - 0.5) * 0.001;
        lng += (Math.random() - 0.5) * 0.001;
        marker.setLatLng([lat, lng]);
        map.panTo([lat, lng]);

        if(step < statuses.length) {
            const statusBox = document.getElementById('statusBox');
            statusBox.innerText = statuses[step].text;

            // Animate progress bar
            const progress = ((step+1)/statuses.length)*100;
            document.getElementById('progressBar').style.width = progress + "%";

            // Update timeline with timestamp
            document.getElementById('time'+step).innerText = " ("+getCurrentTime()+")";
            const timelineItems = document.querySelectorAll('.timeline li');
            timelineItems.forEach((li, index) => {
                li.classList.toggle('active', index === step);
            });

            step++;
        }
    }
    // Call the crew button
document.getElementById('callCrewBtn').addEventListener('click', function() {
    const contactNumber = document.getElementById('patientContact').innerText.trim();
    window.location.href = `tel:${contactNumber}`;
});


    setInterval(updateDashboard, 4000);

</script>

</body>
</html>
